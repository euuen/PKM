# PID示范

## 基本位置PID

方便起见，这里我采用的是python，pid设置的是位置pid

假设我们有这么一个情景，我们现在需要自动调节电机的转速，这该如何调整呢？

首先不管那么多，先把kp设置为1,把ki, kd都设置为0先，后面根据效果慢慢调整马。

```python
class PID:
    def __init__(self):
        self.kp = 1 # 比例系数 - 增加响应速度
        self.ki = 0 # 积分系数 - 消除稳态误差
        self.kd = 0 # 微分系数 - 抑制超调
        
        # PID状态变量
        self.prev_error = 0
        self.integral = 0
    
    def __call__(self, error, dt):
        # 更新误差记录
        self.prev_error = error

        # 比例项
        P = self.kp * error

        # 积分项（带积分限幅防止积分饱和）
        self.integral += error * dt
        # 积分限幅
        self.integral = max(min(self.integral, 10), -10)
        I = self.ki * self.integral

        # 微分项
        derivative = (error - self.prev_error) / dt
        D = self.kd * derivative 

        result = P + I + D
        # 输出限幅
        return max(min(result, 10), -10)
        
if __name__ == "__main__":
	pid = PID()
	force = pid(1, 0.02)
```

这是一个最基本的位置PID的算法

## 优化位置PID

看起来之前的PID算法已经很棒了对马？实际上，却是有很多问题