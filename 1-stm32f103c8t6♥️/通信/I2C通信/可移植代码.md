```c
void I2C1_Msp_Init(){
	__HAL_RCC_GPIOB_CLK_ENABLE();
	__HAL_RCC_I2C1_CLK_ENABLE();
	
	// 配置PB6(SCL)和PB7(SDA)
    GPIO_InitStruct.Pin = GPIO_PIN_6|GPIO_PIN_7;
    GPIO_InitStruct.Mode = GPIO_MODE_AF_OD;       // 复用开漏输出
    GPIO_InitStruct.Pull = GPIO_PULLUP;            // 内部上拉
    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH; // 高速模式
    HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);
}

I2C_HandleTypeDef I2C1_Init(int clockSpeed){
	I2C1_Msp_Init();
	
	I2C_HandleTypeDef hi2c1;
    hi2c1.Instance = I2C1;
    hi2c1.Init.ClockSpeed = clockSpeed;       // 标准模式400kHz或者100kHz
    hi2c1.Init.DutyCycle = I2C_DUTYCYCLE_2; // 标准模式固定使用2:1占空比
    hi2c1.Init.OwnAddress1 = 0;           // 主模式无需设置自身地址
    hi2c1.Init.AddressingMode = I2C_ADDRESSINGMODE_7BIT;
    hi2c1.Init.DualAddressMode = I2C_DUALADDRESS_DISABLE;
    hi2c1.Init.OwnAddress2 = 0;
    hi2c1.Init.GeneralCallMode = I2C_GENERALCALL_DISABLE;
    hi2c1.Init.NoStretchMode = I2C_NOSTRETCH_DISABLE;
    return hi2c1;
}

void I2C_Master_TransmitStr(I2C_HandleTypeDef *hi2c, int address,const char *data, int delay){
	HAL_I2C_Master_Transmit(hi2c, address, (uint8_t*) data, strlen(data), delay);	
}

```