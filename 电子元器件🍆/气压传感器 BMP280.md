# 气压传感器 BMP280

## 接线

```cpp
BMP200    |        MCU
VCC                3.3v（看情况用5v，不过不要轻易换成5v）
GND                GND
SCL                A5
SDA                A4
```

## 代码

### Arduino

驱动库：  **​Adafruit BMP280 Library​**​（还要安装依赖库：**Adafruit Unified Sensor​**​）

```cpp
#include <Wire.h>
#include <Adafruit_BMP280.h>

Adafruit_BMP280 bmp; // 使用I2C接口

void setup() {
  Serial.begin(9600);
  while (!Serial); // 等待串口就绪（仅调试需）

  // 初始化传感器（地址0x76或0x77）
  if (!bmp.begin(0x76)) { // 尝试0x76，失败则试0x77
    Serial.println("BMP280未找到！检查接线或地址！");
    while (1); // 停止执行
  }

  // 可选：配置传感器参数
  bmp.setSampling(
    Adafruit_BMP280::MODE_NORMAL,     // 模式（正常/睡眠/强制）
    Adafruit_BMP280::SAMPLING_X2,     // 温度采样
    Adafruit_BMP280::SAMPLING_X16,    // 气压采样
    Adafruit_BMP280::FILTER_X16,      // 滤波
    Adafruit_BMP280::STANDBY_MS_500   // 待机时间
  );
}

void loop() {
  // 读取数据
  float temperature = bmp.readTemperature(); // 摄氏度
  float pressure = bmp.readPressure();       // 帕斯卡(Pa)
  // float altitude = bmp.readAltitude(1013.25); // 计算海拔（输入当前海平面气压）
  float altitude = bmp.readAltitude(1010.0);   // 长沙的平均海平面气压

  // 串口输出
  Serial.print("温度: ");
  Serial.print(temperature);
  Serial.println(" °C");

  Serial.print("气压: ");
  Serial.print(pressure / 100); // 转百帕(hPa)
  Serial.println(" hPa");

  Serial.print("估算海拔: ");
  Serial.print(altitude);
  Serial.println(" 米");
  Serial.println();

  delay(2000); // 2秒更新一次
}
```

#### 小问题

BMP280读取海拔高度，需要知道当前位置的海平面气压。而气压这个东西，又容易受到天气影响，必须要实时获取当前位置的海平面气压才能准确。要获取实时的海平面气压又有点麻烦，所以，我的解决方案是，看最终测出来的海拔是多少，和44.9（长沙的海拔）做对比，使最终的结果相差不到5m就可以了。