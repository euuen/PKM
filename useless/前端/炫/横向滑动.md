# æ¨ªå‘æ»‘åŠ¨

## æœ€ç»ˆæ–¹æ¡ˆ

### HTML

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>horizontal scrolling scrolltrigger</title>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lenis@1.3.4/dist/lenis.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            font-size: 1vmin;
        }


        div {
            display: flex;
        }

        p {
            user-select: none;
        }

        body {
            width: 100%;
            background-color: #171717;
        }

        .empty {
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 80rem;
            margin: 10rem 0;
            background-color: #f7f7f7;
            font-family: impact;
            font-size: 5rem;
            color: #171717;
        }

        .wapper {
            position: relative;
            width: 100%;
        }

        .container {
            position: sticky;
            top: 0;
            align-items: center;
            width: 100%;
            height: 100vh;
            background-color: #17f700;
            overflow: hidden;
        }

        .cardsbox_card {
            justify-content: center;
            align-items: center;
            width: 70rem;
            height: 50rem;
            background-color: #f7f7f7;
            margin-right: 50rem;
            font-family: impact;
            font-size: 5rem;
            color: #171717;
            flex-shrink: 0;
        }
    </style>
</head>

<body>
    <div class="empty">KEEP SCROLL</div>
    <div class="empty">KEEP SCROLL</div>
    <div class="wapper">
        <div class="container">
            <div class="cardsbox">
                <div class="cardsbox_card">
                    KEEP SCROLL
                </div>
                <div class="cardsbox_card">
                    KEEP SCROLL
                </div>
                <div class="cardsbox_card">
                    KEEP SCROLL
                </div>
                <div class="cardsbox_card">
                    KEEP SCROLL
                </div>
            </div>
        </div>
    </div>
    <div class="empty">KEEP SCROLL</div>
    <div class="empty">KEEP SCROLL</div>
</body>
<script>
    // JIEJOE produce
    // bç«™ä¸»é¡µï¼šhttps://space.bilibili.com/3546390319860710
    const lenis = new Lenis({
        duration: 1,
        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
        smoothWheel: true,
        autoRaf: true,
    });
    const scrollbox = {
        wapper: document.querySelector(".wapper"),
        cardsbox: document.querySelector(".cardsbox"),
        distance: 0,
        if_leave: false,
        init() {
            this.resize();
            window.addEventListener("resize", this.resize.bind(this));
            this.create_scrolltrigger();
        },
        create_scrolltrigger() {
            ScrollTrigger.create({
                trigger: this.wapper,
                start: "top top",
                end: "bottom bottom",
                onUpdate: (self) => {
                    this.cardsbox.style.transform = `translateX(-${self.progress * this.distance}px)`;
                },
                onLeave: () => {
                    this.if_leave = true;
                },
                onEnterBack: () => {
                    this.if_leave = false;
                }
            });
        },
        resize() {
            this.distance = this.cardsbox.offsetWidth - innerWidth;
            this.wapper.style.height = `${this.distance}px`;
            if (this.if_leave) this.cardsbox.style.transform = `translateX(-${this.distance}px)`;
        }
    };
    scrollbox.init();
</script>

</html>
```

### Vue

æ­¤ä»£ç é€‚é…vitepressï¼Œæ³¨æ„ï¼Œæ­¤ä»£ç æœ‰å‰¯ä½œç”¨ï¼Œä¼šè®©vitepressçš„vpdocå…ƒç´ å˜å®½

```html
<script setup lang="js">
import { onMounted, ref } from 'vue';
import { gsap } from 'gsap';
import { ScrollTrigger } from 'gsap/ScrollTrigger';

const wapper = ref();
const cardsbox = ref();

onMounted(()=>{
    gsap.registerPlugin(ScrollTrigger);
    // è®©é‚£ä¸ªsb vitepressçªç ´æœ€å¤§å®½åº¦
    let vpdoc = document.querySelector(".vp-doc")
    vpdoc.style.margin = "0"
    vpdoc.style.padding = "0"
    vpdoc.style.maxWidth = "100vw"

    const scrollbox = {
        wapper: wapper.value,
        cardsbox: cardsbox.value,
        distance: 0,
        if_leave: false,
        init() {
            this.resize();
            window.addEventListener("resize", this.resize.bind(this));
            this.create_scrolltrigger();
        },
        create_scrolltrigger() {
            ScrollTrigger.create({
                trigger: this.wapper,
                start: "top top",
                end: "bottom bottom",
                onUpdate: (self) => {
                    this.cardsbox.style.transform = `translateX(-${self.progress * this.distance}px)`;
                },
                onLeave: () => {
                    this.if_leave = true;
                },
                onEnterBack: () => {
                    this.if_leave = false;
                }
            });
        },
        resize() {
            this.distance = this.cardsbox.offsetWidth - innerWidth;
            this.wapper.style.height = `${this.distance}px`;
            if (this.if_leave) this.cardsbox.style.transform = `translateX(-${this.distance}px)`;
        }
    };
    scrollbox.init();
});

</script>

<template>
    <div style="width: 100%;display: flex;flex-shrink: 0;flex-direction: column;">
        <div class="empty">KEEP SCROLL</div>
        <div class="empty">KEEP SCROLL</div>
        <div ref="wapper" class="wapper">
            <div class="container">
                <div ref="cardsbox" class="cardsbox">
                    <div class="cardsbox_card">
                        CARD 1
                    </div>
                    <div class="cardsbox_card">
                        CARD 2
                    </div>
                    <div class="cardsbox_card">
                        CARD 3
                    </div>
                    <div class="cardsbox_card" style="margin: 0;">
                        CARD 4
                    </div>
                </div>
            </div>
        </div>
        <div class="empty">KEEP SCROLL</div>
        <div class="empty">KEEP SCROLL</div>
    </div>
</template>

<style scoped>

* {
    margin: 0;
    padding: 0;
    font-size: 1vmin;
}

div {
    display: flex;
}

p {
    user-select: none;
}

body {
    width: 100%;
    background-color: #171717;
}

.empty {
    justify-content: center;
    align-items: center;
    width: 65rem;
    height: 40rem;
    border-radius: 5rem;
    margin: 10rem 0;
    background-color: #f7f7f7;
    font-family: impact;
    font-size: 5rem;
    color: #171717;
}

.wapper {
    position: relative;
    margin: 0;
    padding: 0;
    width: 100%;
}

.container {
    position: sticky;
    max-width: 100%;
    top: 0;
    align-items: center;
    width: 100%;
    height: 105vh;
    overflow: hidden;
}

.cardsbox_card {
    justify-content: center;
    align-items: center;
    width: 65rem;
    height: 40rem;
    border-radius: 5rem;
    background-color: #f7f7f7;
    margin-right: 20rem;
    font-family: impact;
    font-size: 5rem;
    color: #171717;
    flex-shrink: 0;
}
</style>
```

## å‚è€ƒèµ„æ–™

1. ã€ä½•æ­¢ç«–å‘æ»‘åŠ¨ï¼Ÿè®©ä½ çš„ç½‘é¡µæ¨ªç€èµ°ï¼ã€‘ https://www.bilibili.com/video/BV1uW4y1c7LW/?share_source=copy_web&vd_source=d8165ccc8db4f797937e2198122cfca4
2. ã€ç»ˆï¼æï¼ç½‘é¡µæ¨ªå‘æ»‘åŠ¨æ•ˆæœğŸ“•æ•™ç¨‹ğŸ“•ã€‘ https://www.bilibili.com/video/BV1L83WzgEoJ/?share_source=copy_web&vd_source=d8165ccc8db4f797937e2198122cfca4