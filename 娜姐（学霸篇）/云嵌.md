# 云嵌第三次电控考核

## 时间

11月19日-11月30日晚上9点

## 考核地点

卓工中厅（暂定）

## 学习任务

1. 根据江协科技视频学习中断（定时器中断，pwm，外部中断，内部中断，串口及其模式等）
2. 可以结合keysking混合食用
3. 理解定时器在定时中断和pwm工作时的大致流程，理解外部中断大致流程，串口底层数据收发和工作原理
4. 做好markdown笔记

## 考核任务

- 任务一
  - 一个led每一秒翻转一次电平（使用定时中断）
  - 一个led为呼吸灯（pwm，周期和亮度可调）
- 任务二
  - 电脑端串口控制led的亮度
  - 连接一个红外传感器，如果红外传感器检测到物体靠近则led亮，反之保持熄灭（使用外部中断）
  - 如果红外传感器检测到物体，则stm端向pc端一直发送`ON ON ON!!!`；如果没有，则stm端向pc端一直发送`OFF OFF OFF!!!`
- 任务三（串口不允许轮询模式，使用中断模式或者dma+中断模式）
  - pc通过串口发送给stm32一组数据帧（需要包含：led亮度，和亮灭）
    - 三种帧格式（可用按键来切换三种帧格式，也可通过更改宏定义来切换三种帧格式。包头包尾自定义）
      1. 有包头包尾
      2. 有包头无包尾
      3. 没有包头包尾
  - 四个led灯----两个可调节亮度灯，两个不可调节亮度灯
  - 该数据帧需包含两个可调节亮度灯的亮度值，不可调节亮度灯的亮灭
- 任务四（两个stm板，后续称a板，b板）
  - a板和b板通信，a板给b板发送一组数据
  - 帧格式：int类型数据(data1)+0xac+uint16_t类型数据(data2)+bool类型数据（flag标志位）
    - data1在-1000-1000内；data2在0-1000内

  - 对于b板
  	- 设data为int数据，且data=data1+data2
  	- 把data分为四个范围（范围自定义，如：-1000~0、1~1000、1001~1500、1501~2000），date值在每个范围内b板亮不同的灯（4个范围对应4个灯）
  	- 如果flag为1，挂载在b板上的oled显示data数据；如果flag为0，oled不显示数据
  	- oled不要求弄清原理，可直接拿江协的用

## 提示

<u>在代码编写中，需尽可能使用结构体，指针，函数，枚举和联合体</u>

<u>在串口数据转换时，可尝试使用union</u>

## 注意

1. 截止日期：**11月30日晚上9点**
2. **注意提前买好需要的物料**
3. 来验收请注意群里发布的具体时间，分批次进行
4. 有学习疑问请优先在群里提问
5. 最终没有完成所有任务的同学也可以进行线下验收，未验收视作放弃
6. 尽量避免在临近截止日期验收，以免超过截止时间









